{{- if .Values.faucet.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: faucet-config
  namespace: {{ .Values.global.namespace }}
data:
  config.js: |
    import { stringToPath } from '@cosmjs/crypto'

    export default {
        // ✅ ポートを 4500 に変更
        port: 4500,
        db: { path: "./db/faucet.db" },
        project: { 
            name: "{{ .Values.faucet.chain.name }} Faucet",
            logo: "https://ping.pub/logo.svg",
            deployer: "Cryptomeria"
        },
        blockchain: {
            rpc_endpoint: "{{ .Values.faucet.chain.rpc }}",
        },
        sender: {
            mnemonic: "MNEMONIC_PLACEHOLDER",
            option: {
                // ✅ 修正: 改行や空白が入らないよう、1行で記述
                hdPaths: [stringToPath("m/44'/{{ .Values.faucet.chain.coinType }}'/0'/0/0")],
                prefix: "{{ .Values.faucet.chain.prefix }}"
            }
        },
        tx: {
            amount: {
                denom: "{{ .Values.faucet.chain.denom }}",
                amount: "{{ .Values.faucet.chain.amount }}"
            },
            fee: {
                amount: [{ amount: "{{ .Values.faucet.chain.fee }}", denom: "{{ .Values.faucet.chain.denom }}" }],
                gas: "200000"
            },
        },
        limit: { address: 100, ip: 100 }
    }
{{- end }}
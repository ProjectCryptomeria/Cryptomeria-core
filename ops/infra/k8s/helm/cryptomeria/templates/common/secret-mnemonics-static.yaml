{{- if .Values.staticMnemonics.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "cryptomeria.fullname" . }}-mnemonics
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "cryptomeria.labels" . | nindent 4 }}
type: Opaque
stringData:
  # ===========================================================================
  # Fixed Chains (GWC, MDSC)
  # ===========================================================================
  # GWC
  gwc.local-admin.mnemonic: {{ .Values.staticMnemonics.gwc.localAdmin | quote }}
  gwc.relayer.mnemonic:     {{ .Values.staticMnemonics.gwc.relayer | quote }}
  gwc.millionaire.mnemonic: {{ .Values.staticMnemonics.gwc.millionaire | quote }}

  # MDSC
  mdsc.local-admin.mnemonic: {{ .Values.staticMnemonics.mdsc.localAdmin | quote }}
  mdsc.relayer.mnemonic:     {{ .Values.staticMnemonics.mdsc.relayer | quote }}

  # ===========================================================================
  # Scalable Chains (FDSC) - Loop Generation
  # ===========================================================================
  # シェルスクリプト側を単純化するため、レプリカ数分だけキーを展開する。
  # 中身は共通だが、ファイル名を fdsc-0.xxx, fdsc-1.xxx とすることで、
  # Chain ID だけでファイルを特定できるようにする。
  {{- if .Values.fdsc }}
  {{- $adminMnemonic := .Values.staticMnemonics.fdsc.localAdmin }}
  {{- $relayerMnemonic := .Values.staticMnemonics.fdsc.relayer }}
  {{- $count := int .Values.fdsc.replicas }}
  
  {{- range $i := until $count }}
  fdsc-{{ $i }}.local-admin.mnemonic: {{ $adminMnemonic | quote }}
  fdsc-{{ $i }}.relayer.mnemonic:     {{ $relayerMnemonic | quote }}
  {{- end }}
  {{- end }}

{{- end }}
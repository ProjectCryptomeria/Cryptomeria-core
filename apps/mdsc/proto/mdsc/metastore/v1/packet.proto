syntax = "proto3";
package mdsc.metastore.v1;

option go_package = "mdsc/x/metastore/types";

// MetastorePacketData defines the Metastore data packet.
message MetastorePacketData {
  oneof packet {
    NoData noData = 1;
    ManifestPacket manifestPacket = 3;
  }
}

// NoData defines an empty data packet.
message NoData {}

// PacketFragmentMapping defines the location of a fragment
// (GWCのPacketFragmentMappingと一致)
message PacketFragmentMapping {
  string fdsc_id     = 1;
  string fragment_id = 2;
}

// FileMetadata defines metadata for a single file within the project
// (GWCのFileMetadataと一致)
message FileMetadata {
  string mime_type = 1;
  uint64 size      = 2;
  repeated PacketFragmentMapping fragments = 3;
}

// ManifestPacket defines the structure of the website/project
// (GWCのManifestPacketと一致: Map構造を使用)
message ManifestPacket {
  string project_name = 1;
  string version      = 2;
  // Map key is the relative path (e.g. "index.html", "assets/logo.png")
  map<string, FileMetadata> files = 3;
}
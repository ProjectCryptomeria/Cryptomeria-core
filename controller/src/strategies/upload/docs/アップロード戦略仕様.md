# 📜 ブロックチェーン・データアップロード戦略：研究総括

## Ⅰ. 根幹を成す戦略要素の概観 💡

データアップロード戦略の有効性を判断するため、以下の主要要素とそのトレードオフを検討する。

| 要素 | 主要な選択肢 | 目的と内包する課題 |
| :--- | :--- | :--- |
| **チェーン構成** | **単一 / 複数** | 複数の構成は、**ストレージ負荷分散**および巨大データ処理能力の獲得を目的とする。 |
| **送出方式** | **ワンバイワン** (安定) / **バースト** (高速) | バースト方式は高速性に優るが、ノンス操作および**厳格なノード負荷制御**を必須とする。 |
| **チャンク割当** | **メガチャンク** (静的) / **共通キュー** (動的) | 静的割当はデータ偏在リスクを最小化する。動的割当は**速度効率**の極大化を企図する。 |
| **チェーン選択** | RR / ランダム / **空き選択** | 共通キュー方式適用時のみ採用。空き選択は速度効率と**データ偏在**のトレードオフを内包する。 |

-----

## Ⅱ. 構成要素の詳細定義と分類 🧩

### 2-1. 基礎構造：チェーンとエージェントの対応 ⛓️

| 要素名称 | 選択肢 | 詳細定義 |
| :--- | :--- | :--- |
| **チェーン構成** | **単一 (Single)** | 単一のブロックチェーンを利用。 |
| | **複数 (Multi)** | 複数の並列チェーンを利用し、負荷逓減を狙う。 |
| **エージェント** | **一対一対応** | エージェントとチェーンを等数配置し、各エージェントは**専属のチェーン**にのみ送信責務を持つ。これによりノンス競合を回避し、システムの単純化を図る。 |

-----

### 2-2. 送出方式：速度と安全性の両立 🚀

| 要素名称 | 選択肢 | 詳細定義 |
| :--- | :--- | :--- |
| **送出方式**| **ワンバイワン** | 1ブロックあたり**1トランザクション**を基本とし、高い安定性と信頼性を担保する。速度は遅延する。 |
| | **バースト** | ノンスを人為的に操作し、**1ブロックに複数トランザクション**（ミニチャンク）を強制的に内包させる。制御パラメータによる**ノード負荷の抑制**が成功の鍵となる。 |
| **バースト制御** | **Mempool監視** | Mempoolの空き容量をリアルタイムに把握し、過剰なTx投入を防ぐための送信間隔・バッチサイズの動的調整を実施する。 |
| | **ブロック占有率パラメータ**| トランザクション合計サイズがターゲットブロックサイズの**許容割合**を超過せぬよう制限し、ノードの安全なブロック生成を支援する。 |

-----

### 2-3. データ割当：静的 vs 動的 ⚖️

| 要素名称 | 選択肢 | 詳細定義 |
| :--- | :--- | :--- |
| **チャンク割当**| **メガチャンク** (静的) | 元データを**事前に均等に分割**し、各エージェントに固定で割り当てる。データ量の偏在は生じず、チェーン選択ロジックは不要となる。 |
| | **共通キュー** (動的) | 全チャンクを共通のキューに格納し、各エージェントが都度取得(プル)して送信する。エージェントの遊休を最小化する反面、**チェーンに保存されるデータ量の偏り抑える適切なチェーン選択**が必要となる。 |

-----

### 2-4. チェーン選択：動的効率化の試み 🎯

| 要素名称 | 選択肢 | 詳細定義 |
| :--- | :--- | :--- |
| **チェーン選択**| **ラウンドロビン** (RR) | 予め定めた順序に従いチェーンを切り替える。処理能力の差は考慮しないが、データは**機械的に均等分散**される。 |
| | **ランダム** (Random) | 送信先チェーンを無作為に選択する。RRよりも単純だが、短期的な偏りは生じ得る。 |
| | **空き選択** (Availability) | 各チェーンのMempoolの空き状況を監視し、**最も処理能力に余裕のあるチェーン**を優先的に選択する。速度効率は極大化されるが、**データ偏在**の危険性が最も高い。 |

-----

## Ⅲ. ケース構造ツリー

```
Single_Chain_Strategy (単一チェーン: 4ケース)
├── One_By_One (ワンバイワン)
│   ├── S-1: Mega_Chunk (静的)
│   └── S-2: Common_Queue (動的)
└── Burst (バースト - 制御パラメータ適用)
    ├── S-3: Mega_Chunk (静的)
    └── S-4: Common_Queue (動的)

Multi_Chain_Strategy (複数チェーン: 10ケース)
├── Mega_Chunk_Strategy (静的振り分け: 2ケース)
│   ├── M-1: One_By_One
│   └── M-2: Burst
└── Common_Queue_Strategy (動的振り分け: 8ケース)
    ├── M-3: One_By_One
    │   ├── M-3_B: Chain_Selection: Round_Robin (RR)
    │   ├── M-3_C: Chain_Selection: Random
    │   └── M-3_D: Chain_Selection: Available (空き選択)
    └── M-4: Burst (制御パラメータ適用)
        ├── M-4_B: Chain_Selection: Round_Robin (RR)
        ├── M-4_C: Chain_Selection: Random
        └── M-4_D: Chain_Selection: Available (空き選択)
```

## Ⅳ. 全戦略ケースと主要トレードオフの総括

### 4-1. 実験対象の全戦略ケース（14種）

| 分類 | 戦略概要 | 焦点となる評価項目 |
| :--- | :--- | :--- |
| **S-1〜S-4** | **単一チェーン**戦略 | ワンバイワンとバーストの絶対的な**速度・安定性**を測る。S-1は安定性のベースライン。 |
| **M-1, M-2** | **複数＋メガチャンク**（静的） | 負荷分散を実現する上での**確実なベースライン**。M-2は制御下の高速分散を試みる。 |
| **M-3\_B/C/D** | **複数＋共通キュー＋ワンバイワン** | 安定性を維持しつつ、動的振り分けと各種選択ロジックによる**可用性向上**を検証。 |
| **M-4\_B/C/D** | **複数＋共通キュー＋バースト** | **最高速度**の達成を追求。特にM-4\_Dは偏在リスクを許容し、速度と可用性の極大化を狙う。 |

### 4-2. 実験で評価すべき主要なトレードオフ

本研究の目的は、以下の対立する要素の最適解を見出すことにある。

  * **速度** (バースト) **vs 安定性** (ワンバイワンおよび負荷制御の精度)
  * **データ偏在** (空き選択の結果) **vs 速度効率** (可用性の最大活用)
  * **確実性** (メガチャンク/静的) **vs 柔軟性** (共通キュー/動的)



---
DocType: SPEC
SourceOfTruth: doc
Status: draft
LastReviewed: 2026-01-25
Owners: TBD
---

# Cryptomeria-Core プロジェクト憲章 / システム概要（Charter）

## 1. この文書の目的と読み方
本書は、Cryptomeria-Core を「なぜ作るのか」「何を正として開発するのか」を固定する“メインドキュメント”です。
- **長期的に改変しない前提**（動機・問題意識・不変原則）をここに集約します。
- 実装や運用の詳細は、他ドキュメント（GUIDE/REF）に委譲します。

## 2. 背景・動機・問題意識
- **背景**：DApps
- **問題意識**：
  - 単一ストレージ依存は検閲/障害/改ざんリスクがある
  - 「保存された」ことと「正しく保存された」ことのギャップ
  - Webホスティングやダウンロードの“参照解決”が複雑化する
- **狙い**：保存/参照/復元を、チェーン間連携と検証可能性で“システムとして”成立させる

## 3. 目標（Goals）
- **G1**：データをフラグメント化し、複数ストレージ（FDSC-*）へ分散保存できる
- **G2**：メタデータ（manifest）を別系統（MDSC）に保持し、参照解決できる
- **G3**：ゲートウェイ（GWC）が、保存先の解決と復元（download/hosting）を提供する
- **G4**：保存内容の整合性を、**Merkle proof / root proof** により検証可能にする
- **G5**：FDSC-* を増やすことで負荷分散できる（スケール特性を持つ）

## 4. 非目標（Non-goals）
- **N1**：一般的なクラウドストレージの完全代替（UX/性能/コスト最適化は段階的）
- **N2**：全ての脅威を排除する完全セキュリティ（信頼モデルは限定的）
- **N3**：コンセンサス/チェーン基盤そのものの研究（Cosmos SDK/IBC の上で成立させる）
- **N4**：最適な暗号化・秘匿化の提供（必要なら別レイヤーで追加）

## 5. 想定ユースケース
- **Upload**：データを分割し、FDSC-* に分散保存し、manifest を MDSC に登録する
- **Download**：manifest を起点に、該当フラグメントを集めて復元する
- **Web Hosting**：HTTP 経由で、GWC が復元結果を配信する（/render）
- **卒業研究**：スケール特性・信頼性・復元性能・障害耐性等を評価する

## 6. システム概要（俯瞰）
### 6.1 レイヤー
- **Deploy レイヤー**：k8s/helm と運用スクリプトで、起動〜接続確立までを担う
- **System レイヤー**：GWC/MDSC/FDSC/Relayer の仕様・プロトコル
- **Client レイヤー**：利用者が実行する操作（CLI/HTTP/実験手順）

### 6.2 主要コンポーネント
- **GWC（Gateway Chain）**：セッション（CSU）管理、分散送信、参照解決、復元配信
- **MDSC（MetaData Store Chain）**：manifest の保存・提供
- **FDSC-*（File Data Store Chain）**：fragment の保存・提供（水平スケール）
- **Relayer**：IBC の中継（接続維持・パケット中継）

## 7. 信頼モデル・前提条件（Trust Model）
（研究の“前提”として明確化する）
- チェーンは Cosmos SDK/IBC を前提とする
- Relayer は “正しく動作するが落ちることはある” 程度を想定
- 保存内容の正当性は **proof 検証**により担保する（＝保存先を完全には信頼しない）
- ただし「可用性」や「性能」は構成に依存する（卒研で評価対象）

## 8. 不変原則（Principles / Invariants）
- **P1**：参照解決は manifest を唯一の起点とする
- **P2**：復元可能性は fragment の集合と順序で定義される
- **P3**：整合性は Merkle proof/root により検証可能であること
- **P4**：FDSC は増やせる（スケール手段が仕様として存在する）
- **P5**：GWC は「解決する」役割であり「保存する主役」ではない

## 9. 用語（最小）
- **Fragment**：分割されたデータ片
- **Manifest**：ファイル→フラグメント集合のメタデータ
- **CSU Session**：アップロードをまとめるセッション（root/proofを含む）
- **Endpoint Registry**：GWC が保持する MDSC/FDSC の API endpoint 情報

## 10. 関連文書
- アーキテクチャ：`02_architecture.md`
- プロトコル：`03_protocol_spec.md`
- ユースケースフロー：`04_usecase_flows.md`
- デプロイ運用：`05_deploy_ops_guide.md`
- クライアント：`06_client_guide.md`
- リファレンス：`07_reference.md`
- Runbook：`08_runbook.md`
- 卒研：`09_experiment_handbook.md`
- 実験テンプレ：`10_experiment_protocol_template.md`

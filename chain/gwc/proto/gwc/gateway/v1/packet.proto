syntax = "proto3";
package gwc.gateway.v1;

option go_package = "gwc/x/gateway/types";

// GatewayPacketData defines the Gateway data packet.
message GatewayPacketData {
  oneof packet {
    NoData noData = 1;
    FragmentPacket fragmentPacket = 2;
    ManifestPacket manifestPacket = 3;
  }
}

// NoData defines an empty data packet.
message NoData {}

// FragmentPacket defines the data fragment to be sent to FDSC
message FragmentPacket {
  uint64 id = 1;
  bytes  data = 2;
}

// ManifestPacket defines the metadata to be sent to MDSC
message ManifestPacket {
  string filename = 1;
  // 修正: size -> file_size (Goでの名前衝突回避のため)
  uint64 file_size = 2;
  string mime_type = 3;
  repeated PacketFragmentMapping fragments = 4;
}

message PacketFragmentMapping {
  string fdsc_id = 1;
  string fragment_id = 2;
}